<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Language Learning Reader</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="header-title">
                    <h1>üìö Language Learning Reader</h1>
                    <p class="subtitle">Improve your language skills with interactive stories</p>
                </div>
                <div class="header-auth">
                    <div id="auth-loading" class="auth-loading hidden">Loading...</div>
                    <div id="auth-buttons" class="auth-buttons hidden">
                        <a href="/auth/google" class="btn btn-login">
                            <span class="google-icon">G</span>
                            Sign in with Google
                        </a>
                    </div>
                    <div id="user-profile" class="user-profile hidden">
                        <img id="user-avatar" class="user-avatar" src="" alt="User">
                        <div class="user-info">
                            <span id="user-name" class="user-name"></span>
                            <span id="user-points" class="user-points">0 points</span>
                        </div>
                        <button id="logout-btn" class="btn btn-logout">Logout</button>
                    </div>
                </div>
            </div>
            <nav id="main-nav" class="main-nav hidden">
                <button id="nav-home" class="nav-btn active">Home</button>
                <button id="nav-account" class="nav-btn">My Account</button>
            </nav>
        </header>

        <main>
            <!-- Story Generation Section -->
            <div id="generation-section" class="section">
                <div class="form-container">
                    <label for="language-select">Choose Language:</label>
                    <select id="language-select" class="language-select">
                        <option value="">Select a language...</option>
                        <option value="spanish">Spanish (Espa√±ol)</option>
                        <option value="chinese">Chinese (‰∏≠Êñá)</option>
                        <option value="hindi">Hindi (‡§π‡§ø‡§®‡•ç‡§¶‡•Ä)</option>
                        <option value="urdu">Urdu (ÿßÿ±ÿØŸà)</option>
                        <option value="french">French (Fran√ßais)</option>
                        <option value="arabic">Arabic (ÿßŸÑÿπÿ±ÿ®Ÿäÿ©)</option>
                        <option value="russian">Russian (–†—É—Å—Å–∫–∏–π)</option>
                        <option value="german">German (Deutsch)</option>
                        <option value="japanese">Japanese (Êó•Êú¨Ë™û)</option>
                        <option value="korean">Korean (ÌïúÍµ≠Ïñ¥)</option>
                    </select>

                    <label for="grade-level">Pick Grade Level:</label>
                    <select id="grade-level" class="grade-select">
                        <option value="">Select a grade level...</option>
                        <option value="K">Kindergarten</option>
                        <option value="1">1st Grade</option>
                        <option value="2">2nd Grade</option>
                        <option value="3">3rd Grade</option>
                        <option value="4">4th Grade</option>
                        <option value="5">5th Grade</option>
                        <option value="6">6th Grade</option>
                        <option value="7">7th Grade</option>
                        <option value="8">8th Grade</option>
                        <option value="9">9th Grade</option>
                        <option value="10">10th Grade</option>
                        <option value="11">11th Grade</option>
                        <option value="12">12th Grade</option>
                    </select>

                    <button id="generate-btn" class="btn btn-primary">Generate Story</button>
                    
                    <div id="loading" class="loading hidden">
                        <div class="spinner"></div>
                        <p>Generating your story...</p>
                    </div>
                    
                    <div id="error-message" class="error-message hidden"></div>
                </div>
            </div>

            <!-- Story Display Section -->
            <div id="story-section" class="section hidden">
                <div class="story-header">
                    <h2>Your <span id="story-language">Language</span> Story</h2>
                    <div class="header-buttons">
                        <button id="save-story-btn" class="btn btn-save hidden">
                            <span>üíæ</span> Save Story
                        </button>
                        <button id="audio-btn" class="btn btn-audio">
                            <span class="audio-icon">üîä</span>
                            <span class="audio-text">Listen to Story</span>
                        </button>
                        <button id="new-story-btn" class="btn btn-secondary">Generate New Story</button>
                    </div>
                </div>
                
                <div id="audio-loading" class="audio-loading hidden">
                    <div class="spinner-small"></div>
                    <p>Generating audio...</p>
                </div>
                
                <div id="story-content" class="story-content"></div>
                
                <div class="instructions">
                    <p><strong>üí° Tip:</strong> Hover over any word to see its English translation<span id="save-word-tip" class="hidden"> and click the üíæ icon to save it!</span></p>
                </div>

                <!-- Quiz Button -->
                <div class="quiz-button-container">
                    <button id="quiz-btn" class="btn btn-quiz">üìù Quiz Yourself</button>
                </div>
            </div>

            <!-- Quiz Section -->
            <div id="quiz-section" class="section hidden">
                <div class="quiz-header">
                    <h2>üìù Story Quiz</h2>
                    <button id="back-to-story-btn" class="btn btn-secondary-small">‚Üê Back to Story</button>
                </div>

                <div id="quiz-loading" class="loading hidden">
                    <div class="spinner"></div>
                    <p>Generating quiz questions...</p>
                </div>

                <div id="quiz-content" class="quiz-content hidden">
                    <p class="quiz-instructions">Answer the following questions about the story:</p>
                    <form id="quiz-form">
                        <div id="quiz-questions"></div>
                        <button type="submit" class="btn btn-primary">Submit Answers</button>
                    </form>
                </div>

                <div id="quiz-results" class="quiz-results hidden">
                    <h3>Quiz Results</h3>
                    <div class="score-display">
                        <div class="score-circle">
                            <span id="score-text">0/3</span>
                        </div>
                        <p id="score-message"></p>
                        <p id="points-earned" class="points-earned hidden"></p>
                    </div>
                    <div id="question-feedback"></div>
                    <div class="quiz-actions">
                        <button id="retake-quiz-btn" class="btn btn-secondary">Retake Quiz</button>
                        <button id="new-story-from-quiz-btn" class="btn btn-primary">Generate New Story</button>
                    </div>
                </div>
            </div>

            <!-- Account Section -->
            <div id="account-section" class="section hidden">
                <h2>My Account</h2>
                
                <div class="account-stats">
                    <div class="stat-card">
                        <div class="stat-icon">‚≠ê</div>
                        <div class="stat-info">
                            <span class="stat-value" id="account-points">0</span>
                            <span class="stat-label">Total Points</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìö</div>
                        <div class="stat-info">
                            <span class="stat-value" id="saved-stories-count">0</span>
                            <span class="stat-label">Saved Stories</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìù</div>
                        <div class="stat-info">
                            <span class="stat-value" id="vocab-count">0</span>
                            <span class="stat-label">Vocabulary Words</span>
                        </div>
                    </div>
                </div>

                <div class="account-section-header">
                    <h3>üìö Saved Stories</h3>
                </div>
                <div id="saved-stories-container" class="saved-stories-container">
                    <div class="loading-container hidden" id="stories-loading">
                        <div class="spinner-small"></div>
                        <p>Loading stories...</p>
                    </div>
                    <div id="saved-stories-list"></div>
                    <p id="no-stories" class="empty-state hidden">You haven't saved any stories yet. Generate and save stories to see them here!</p>
                </div>

                <div class="account-section-header">
                    <h3>üìù Vocabulary Bank</h3>
                    <select id="vocab-filter" class="vocab-filter">
                        <option value="">All Languages</option>
                        <option value="spanish">Spanish</option>
                        <option value="chinese">Chinese</option>
                        <option value="hindi">Hindi</option>
                        <option value="urdu">Urdu</option>
                        <option value="french">French</option>
                        <option value="arabic">Arabic</option>
                        <option value="russian">Russian</option>
                        <option value="german">German</option>
                        <option value="japanese">Japanese</option>
                        <option value="korean">Korean</option>
                    </select>
                </div>
                <div id="vocabulary-container" class="vocabulary-container">
                    <div class="loading-container hidden" id="vocab-loading">
                        <div class="spinner-small"></div>
                        <p>Loading vocabulary...</p>
                    </div>
                    <div id="vocabulary-table"></div>
                    <p id="no-vocab" class="empty-state hidden">You haven't saved any vocabulary words yet. Hover over words in stories and click the save icon!</p>
                </div>
            </div>
        </main>

        <footer>
            <p>¬© 2025 Language Learning Reader | Built for language learners worldwide</p>
        </footer>
    </div>

    <!-- Translation Tooltip with Save Button -->
    <div id="tooltip" class="tooltip hidden">
        <span id="tooltip-text"></span>
        <button id="tooltip-save" class="tooltip-save-btn hidden" title="Save word">üíæ</button>
    </div>

    <!-- Hidden audio element -->
    <audio id="story-audio" style="display: none;"></audio>

    <script src="script.js"></script>
</body>
</html>
